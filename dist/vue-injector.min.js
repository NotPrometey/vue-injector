/*!
  * @scandltd/vue-injector v1.1.0
  * (c) 2018 Scandltd
  * @license GPL-2.0
  */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.VueInjector={})}(this,function(t){"use strict";var r;function i(t){if(!i.installed||r!==t){i.installed=!0;var o=function(t){return void 0!==t},e=function(t,e){var r=t.$options._parentVnode;o(r)&&o(r=r.data)&&o(r=r.registerRouteInstance)&&r(t,e)};(r=t).mixin({beforeCreate:function(){o(this.$options.providers)&&(this._providers=this.$options.providers),o(this.$options.injector)?((this._injectorRoot=this)._injector=this.$options.injector,this._injector.init(this)):(this._injectorRoot=this.$parent&&this.$parent._injectorRoot||this,this._injectorRoot._injector.initComponent(this)),e(this,this)},destroyed:function(){e(this)}}),Object.defineProperty(t.prototype,"$injector",{get:function(){return this._injectorRoot._injector}})}}function s(t,e){if(!t)throw new Error("[@scandltd/vue-injector] "+e)}var e="undefined"!=typeof window,n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function o(o,i){return void 0===i&&(i={}),function(r){function t(t){var e=r.call(this,t)||this;return e.isVueService=!0,e.name=o.name,e.context=i.context||null,e.import=i.import||null,e.vm=t,e}return function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}(t,r),t.getName=function(){return o.name},t}(o)}var c=function(){function t(){}return t.getName=function(){return this.name},t}();var p=function(){function t(){for(var t=arguments,e=[],r=0;r<arguments.length;r++)e[r]=t[r];this.rootProviders=[],this.app=null,this.provider=null,this.apps=[],this.rootProviders=e}return Object.defineProperty(t.prototype,"install",{get:function(){return t.install},enumerable:!0,configurable:!0}),t.prototype.init=function(t){this.apps.push(t),this.app||(this.app=t,this.provider=new f(this.app,this.rootProviders))},t.prototype.initComponent=function(t){this.provider&&this.provider.registerComponent(t)},t.prototype.get=function(t){return this.provider&&this.provider.get(t)},t}();p.install=i,p.version="1.1.0",e&&window.Vue&&window.Vue.use(p);var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f=function(){function t(t,e){this.rootProviders=[],this.app=t,this.rootProviders=e,this.services=new Map}return t.prototype.registerComponent=function(e){var r=this;if(e.hasOwnProperty("_providers")){var o=e._providers;o&&this.checkObject(o)?Object.keys(o).forEach(function(t){o&&o.hasOwnProperty(t)&&r.registerService(e,t,o[t])}):s(!1,"providers not object")}this.rootProviders.length&&this.rootProviders.forEach(function(t){r.checkGetName(t)&&r.registerService(e,t.getName(),t)})},t.prototype.registerService=function(t,e,r){var o=this;this.services.has(r)||"Injectable"!==r.name||(r.prototype.vm=this.app,this.services.set(r,new r(this.app)));var i=this.services.get(r);if(i&&i instanceof c){if(i.import)if(this.checkObject(i.import)){var n=Object.keys(i.import).map(function(t){return{name:t,service:o.registerService(i,t,i.import[t])}}).filter(function(t){return t.service instanceof c});this.injectService(i,n)}else s(!1,"providers not object");return this.injectService(t,[{name:e,service:i}]),i}s(!1,"no decorator Injectable or extends Inject")},t.prototype.set=function(t){if(this.checkGetName(t)){var e=this.registerService(this.app,t.getName(),t);e&&e instanceof c&&this.services.set(t,e)}},t.prototype.get=function(t){return this.services.has(t)||this.set(t),this.services.get(t)},t.prototype.injectService=function(r,t){t.forEach(function(t){var e=t.name;!Object.hasOwnProperty.call(r,e)&&t.service&&Reflect.defineProperty(r,e,{enumerable:!0,get:function(){return t.service}})})},t.prototype.checkObject=function(t){return!Array.isArray(t)&&"object"===(void 0===t?"undefined":u(t))&&null!==t},t.prototype.checkGetName=function(t){return!(!Object.hasOwnProperty.call(t,"getName")||"function"!=typeof t.getName)},t}(),a=function(){function t(){for(var t=arguments,e=[],r=0;r<arguments.length;r++)e[r]=t[r];this.rootProviders=[],this.app=null,this.provider=null,this.apps=[],this.rootProviders=e}return Object.defineProperty(t.prototype,"install",{get:function(){return t.install},enumerable:!0,configurable:!0}),t.prototype.init=function(t){this.apps.push(t),this.app||(this.app=t,this.provider=new f(this.app,this.rootProviders))},t.prototype.initComponent=function(t){this.provider&&this.provider.registerComponent(t)},t.prototype.get=function(t){return this.provider&&this.provider.get(t)},t}();a.install=i,a.version="1.1.0",e&&window.Vue&&window.Vue.use(a),t.Injectable=function(e){return"function"==typeof e?o(e):function(t){return o(t,e)}},t.Inject=c,t.Service=function(r){return o=function(t,e){(t.providers||(t.providers={}))[e]=r},function(t,e){var r="function"==typeof t?t:t.constructor;r.__decorators__||(r.__decorators__=[]),r.__decorators__.push(function(t){return o(t,e)})};var o},t.default=a,Object.defineProperty(t,"__esModule",{value:!0})});